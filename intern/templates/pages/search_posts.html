{% extends "pages/base.html" %}
{% block extrastyle %}

    <link rel="stylesheet" href="/static/css/style_search_posts.css" type="text/css">

{% endblock %}
{% block title %}Tìm kiếm: {{q}}{% endblock %}
 
{% block content %}

<div class="row">
    <div class="col-sm-8">
        <!-- 
        {% for post in Posts %}
            <table  class ="tab_list">
            <br>
            <tr>
                <td style=" padding:10px; width:100%; border:none ">
                    <em> {{post.category.name}}</em>
                    <h4> <a href= " {% url 'post' post.id %}">{{post.title}}</a></h4>
                    <img src="{{post.image.url}}" width="50px" height=auto /> <em style="top:0px;"> {{post.date|date:"d-m-Y"}}</em>
                    <hr>
                </td>       
            </tr>
            </table>
        {% endfor %} -->

        {% if request.GET.q %}
            <h4>{{ request.GET.q }}</h4>
        {% endif %}
        <br>
        <em> Tìm thấy {{Post_count}} kết quả</em>
        <br>
        {% if record_list %}
            {% for post in record_list %}
            <table  class ="tab_list">
                <br>
                <tr>
                    <td style=" padding:10px; width:100%; border:none ">
                        <em> {{post.category.name}}</em>
                        <h4> <a href= " {% url 'post' post.id %}">{{post.title}}</a></h4>
                        <img src="{{post.image.url}}" width="50px" height=auto /> <em style="top:0px;"> {{post.date|date:"d-m-Y"}}</em>
                        <hr>
                    </td>
                    
                </tr>
            </table>
                
            {% endfor %}
        {% else %} 
                <p>No Data Found</p>
        {% endif %}
    
        
        <!-- Pagination -->
        {% if record_list.has_other_pages %}
        
            <div class="text-center" style="float:right">
                <ul class="pagination">
            
                    {% if record_list.has_previous %}
                        <li>
                            <a class="previous" href="?{% if request.GET.q %}q={{ request.GET.q }}{% endif %}&page=1">
                                << </a> 
                                <a class="previous" href="?{% if request.GET.q %}q={{ request.GET.q }}{% endif %}&page={{ record_list.previous_page_number }}">
                                    < </a> 
                        </li> 
                    {% else %} 
                        <li class="disabled"><span>
                            << </span> </li> 
                            <li class="disabled"><span>
                                < </span> 
                        </li> 
                    {% endif %} 

                    {% if start_index %} 
                        <li>
                            <a class="next" href="?{% if request.GET.q %}q={{ request.GET.q }}{% endif %}&page={{ start_index }}">{{ start_index }}</a>
                        </li>
                        <li class="disabled"><span>&mldr;</span></li>
                    {% endif %}
            
                    {% for i in page_range %}
                        {% if record_list.number == i %}
                            <li class="active"><span>{{ i }} <span class="sr-only">(current)</span></span></li>
                            {% else %}
                            <li>
                                <a class="previous" href="?{% if request.GET.q %}q={{ request.GET.q }}{% endif %}&page={{ i }}">{{ i }}</a>
                            </li>
                        {% endif %}
                    {% endfor %}

                    {% if record_list.has_next %}
                        {% if end_index %}
                        <li class="disabled"><span>&mldr;</span></li>
                        <li><a class="previous" href="?{% if request.GET.q %}q={{ request.GET.q }}{% endif %}&page={{ end_index }}">{{ end_index }}</a></li>
                    
                        {% endif %}
                            <li>
                                <a class="next" href="?{% if request.GET.q %}q={{ request.GET.q }}{% endif %}&page={{ record_list.next_page_number }}"> > </a>
                                <a class="next" href="?{% if request.GET.q %}q={{ request.GET.q }}{% endif %}&page={{max_index}}"> >> </a>
                    
                            </li>
                    {% else %}
                        <li class="disabled"><span> > </span></li>
                        <li class="disabled"><span> >> </span></li>
                    {% endif %}
            
                </ul>
            </div>
            
        {% endif %}
        <!--Pagination -->
    </div>
    

</div>



{% endblock %}